/* =====================
   VARIABLES / BRAND
===================== */
:root{
  --primary:#000000;            /* brand black */
  --secondary:#A9ECFD;          /* brand blue */
  --ink:#ffffff;
  --muted:#9aa3ab;
  --panel:#111316;
  --panel-2:#171a1e;
  --border:#21262b;

  /* side accents (subtle, used for outlines/glow only) */
  --player-accent:#7fd8ff;      /* blue tint */
  --opponent-accent:#ff7272;    /* red tint (highlight only) */

  --font-mono:'JetBrains Mono', monospace;
  --font-display:'Supermolot', sans-serif;

  --radius-lg:18px;
  --radius-md:14px;
  --radius-sm:10px;

  --shadow-soft:0 6px 28px rgba(169,236,253,.10), 0 2px 8px rgba(0,0,0,.25);
  --shadow-hard:0 10px 36px rgba(169,236,253,.18), 0 6px 20px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{
  margin:0; padding:0;
  background:var(--primary);
  color:var(--ink);
  font-family:var(--font-mono);
  min-height:100%;
}

/* =====================
   HEADER / FOOTER
===================== */
.header{
  position:fixed; top:0; left:0; right:0; z-index:1000;
  background:var(--primary);
  border-bottom:1.5px solid var(--border);
  box-shadow:0 1px 0 var(--secondary);
}
.header-inner{
  height:60px; max-width:1100px; margin:0 auto;
  padding:0 16px; display:flex; align-items:center; justify-content:space-between;
}
.logo{ height:36px; width:auto; display:block; }
.title{
  font-family:var(--font-display);
  color:var(--secondary);
  font-weight:700; letter-spacing:.04em; font-size:1.15rem;
  text-shadow:0 0 10px rgba(169,236,253,.35);
}

.footer{
  position:fixed; bottom:0; left:0; right:0; z-index:1000;
  background:var(--primary);
  border-top:1.5px solid var(--border);
  box-shadow:0 -1px 0 var(--secondary);
}
.footer-inner{
  height:52px; max-width:1100px; margin:0 auto;
  padding:0 16px; display:flex; align-items:center; justify-content:center;
  color:var(--secondary); font-size:.98rem;
}

/* =====================
   APP LAYOUT (narrow/tall)
===================== */
.app{
  padding-top:60px;           /* header height */
  padding-bottom:52px;        /* footer height */
  min-height:100vh;
  display:flex; align-items:center; justify-content:center;
}

.view{ width:100%; max-width:720px; padding:18px; }                  /* overall page width narrower */
.view > .card{ max-width:560px; margin:0 auto; }                     /* landing & gear cards narrow, centered */
.card{
  background:var(--panel);
  border:1.5px solid var(--border);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-soft);
  padding:22px;
}

/* Headings */
.h1{
  font-family:var(--font-display);
  font-size:1.8rem; margin:4px 0 10px;
  color:var(--secondary);
  text-shadow:0 0 14px rgba(169,236,253,.28), 0 0 2px #fff;
}
.h2{
  font-family:var(--font-display);
  font-size:1.3rem; margin:0 0 10px;
  color:var(--secondary);
  text-shadow:0 0 10px rgba(169,236,253,.24);
}
.lead{
  color:#c7d0d8; line-height:1.55; margin:0 0 18px;
}

/* Buttons */
.btn{
  appearance:none; border:none; cursor:pointer;
  border-radius:var(--radius-md);
  padding:12px 18px; font-weight:700; letter-spacing:.03em;
  font-family:var(--font-display);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
}
.btn:active{ transform:translateY(1px) }

.btn-primary{
  background:linear-gradient(90deg, var(--secondary), #e9faff);
  color:#0b1116; box-shadow:0 0 26px rgba(169,236,253,.45);
}
.btn-primary:hover{ box-shadow:0 0 40px rgba(169,236,253,.75) }

.btn-ghost{
  background:#1a1d21; color:#b9c3cb; border:1.5px solid var(--border);
}

.btn-finish{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(52px + 22px);
  background:linear-gradient(90deg, #1e2429, var(--secondary));
  color:#0b1116; box-shadow:0 0 28px rgba(169,236,253,.55);
  z-index:1200;
}

.btn-pulse{
  background:linear-gradient(90deg, var(--secondary) 10%, #8fe2ff 90%);
  color:#091015; box-shadow:0 0 28px rgba(169,236,253,.55);
  animation:pulse 1.5s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{ box-shadow:0 0 22px rgba(169,236,253,.45) }
  50%{ box-shadow:0 0 46px rgba(169,236,253,.85) }
}
.wide{ width:100% }

/* =====================
   GEAR (forms stacked)
===================== */
.view-gear .gear-card{ padding:22px 20px 26px }
.gear-forms{
  display:grid; gap:16px; grid-template-columns:1fr; margin-bottom:16px; /* stacked */
}
.gear-box{
  background:var(--panel-2); border:1.5px solid var(--border);
  border-radius:var(--radius-md); padding:14px;
}
.gear-label{ color:#e6f7ff; font-size:.95rem; margin-bottom:8px }
.input-wrap{
  display:flex; align-items:center; gap:6px;
  background:#0e1216; border:1.5px solid #2a3137; border-radius:12px;
  padding:6px 10px;
}
.input-wrap:focus-within{ border-color:var(--secondary); box-shadow:0 0 0 2px rgba(169,236,253,.25) }
.at{ color:#69d6ff; font-weight:700 }
input[type="text"]{
  background:transparent; color:#fff; border:none; outline:none;
  font-family:var(--font-mono); font-size:1rem; width:100%;
}

/* =====================
   ARENA (narrow sides, tall bars)
===================== */
.view-arena{ position:relative; }
.arena-grid{
  display:grid; gap:16px;
  grid-template-rows: 1fr 1fr;        /* mobile: top/bottom halves */
}
@media(min-width:980px){
  .arena-grid{ grid-template-rows:none; grid-template-columns:1fr 1fr; }
}

/* overlay + sword FX */
.arena-overlay{
  position:fixed; inset:60px 0 52px 0;   /* between header/footer */
  background:rgba(0,0,0,.55);
  opacity:0; pointer-events:none; transition:opacity .35s ease;
  z-index:900;
}
.arena-overlay.show{ opacity:1 }

.arena-center-fx{
  position:fixed; left:50%; top:50%;
  transform:translate(-50%,-50%) scale(0.6) rotateY(0);
  font-size:54px; opacity:0;
  filter:drop-shadow(0 0 12px rgba(169,236,253,.75));
  z-index:1100; pointer-events:none;
}
.arena-center-fx.play{
  animation:sword-pop 1.1s ease-in-out both;
}
@keyframes sword-pop{
  0%{ opacity:0; transform:translate(-50%,-50%) scale(0.6) rotateY(0) }
  40%{ opacity:1; transform:translate(-50%,-50%) scale(1.1) rotateY(0) }
  55%{ transform:translate(-50%,-50%) scale(1.25) rotateY(180deg) }
  100%{ opacity:0.85; transform:translate(-50%,-50%) scale(0.8) rotateY(360deg) }
}

/* sides (narrow rectangles) */
.side{
  background:var(--panel);
  border:1.5px solid var(--border);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-soft);
  padding:16px 16px 20px;
  position:relative; overflow:hidden;
  max-width:560px; margin:0 auto; /* narrow and centered inside each half */
}
.side-opponent{ outline:1.5px solid rgba(255,114,114,.35) }
.side-player{ outline:1.5px solid rgba(127,216,255,.35) }

/* side headers */
.side-header{
  display:flex; align-items:center; gap:14px; margin-bottom:12px;
}
.pfp{
  width:58px; height:58px; border-radius:50%;
  object-fit:cover; object-position:center;
  border:2px solid var(--secondary);
  box-shadow:0 0 14px rgba(169,236,253,.45);
  background:#0d1014;
}
.meta .handle{
  font-family:var(--font-display);
  color:var(--secondary); font-weight:700; letter-spacing:.04em;
  text-shadow:0 0 10px rgba(169,236,253,.35);
}
.tags{ margin-top:4px; display:flex; gap:8px; flex-wrap:wrap }
.tag{
  font-size:.82rem; color:#0e1419; background:var(--secondary);
  padding:4px 8px; border-radius:8px; font-weight:700; font-family:var(--font-display);
}

/* bars (taller) */
.bars{ display:grid; gap:14px; }
.bar-block{
  background:var(--panel-2); border:1.5px solid var(--border);
  border-radius:var(--radius-md); padding:12px;
}
.bar-title{
  font-family:var(--font-display); color:#d9f6ff; margin-bottom:8px;
  letter-spacing:.03em;
}
.bar-rail{
  height:200px; /* taller for narrow/tall look */
  border-radius:10px; background:#0e1216;
  border:1.5px solid #2b3238; position:relative; overflow:hidden;
  display:flex; align-items:flex-end; padding:6px;
}
.bar-fill{
  --fill:0%; width:100%; height:var(--fill);
  background:linear-gradient(180deg, rgba(169,236,253,.95), rgba(110,216,255,.75));
  border-radius:7px;
  box-shadow:0 0 22px rgba(169,236,253,.45) inset, 0 6px 18px rgba(169,236,253,.25);
  transform-origin:bottom;
  transition:height .6s cubic-bezier(.2,.8,.2,1), box-shadow .25s ease;
}
.side-opponent .bar-fill{
  background:linear-gradient(180deg, rgba(255,114,114,.95), rgba(255,160,160,.75));
  box-shadow:0 0 22px rgba(255,114,114,.35) inset, 0 6px 18px rgba(255,114,114,.25);
}
.bar-stats{
  display:flex; align-items:center; justify-content:space-between;
  margin-top:8px; color:#e4eef6
}
.bar-value{ font-family:var(--font-display); font-weight:700 }
.bar-sub{ color:var(--muted); font-style:italic; font-size:.92rem }

/* chaos shimmer (JS toggles .chaos on .bar-fill) */
.bar-fill.chaos{
  animation: jitter 90ms linear infinite;
}
@keyframes jitter{
  0%{ height:18% }
  50%{ height:82% }
  100%{ height:26% }
}

/* floating action buttons during battle */
.battle-actions{
  position:fixed; inset:80px 0 80px 0; pointer-events:none; z-index:1150;
}
.battle-btn{
  position:absolute; pointer-events:auto;
  background:#0e1216; color:var(--secondary);
  border:1.5px solid var(--secondary); border-radius:10px;
  padding:6px 10px; font-family:var(--font-display); font-weight:700;
  box-shadow:0 0 18px rgba(169,236,253,.45);
  transform:translate(-50%,-50%) scale(.9); opacity:.92;
  transition:transform .18s ease, opacity .18s ease;
}
.battle-btn:hover{ transform:translate(-50%,-50%) scale(1.02); opacity:1 }
.battle-btn.pop{
  animation:btn-pop 700ms ease both;
}
@keyframes btn-pop{
  0%{ transform:translate(-50%,-50%) scale(.6) rotateX(0); opacity:0 }
  45%{ transform:translate(-50%,-50%) scale(1.12) rotateX(0) ; opacity:1 }
  60%{ transform:translate(-50%,-50%) scale(1.18) rotateX(180deg) }
  100%{ transform:translate(-50%,-50%) scale(.95) rotateX(360deg) }
}

/* Finish state dim */
.side.dim{ opacity:.55; filter:grayscale(.1) }

/* =====================
   MODALS & TOAST (narrow)
===================== */
.modal{
  border:none; padding:0; background:transparent;
}
.modal::backdrop{
  background:rgba(0,0,0,.6);
}
.modal-card{
  width:min(420px, 92vw); /* narrower popup */
  background:var(--panel);
  border:1.5px solid var(--border); border-radius:var(--radius-lg);
  box-shadow:var(--shadow-hard); padding:20px;
}
.modal-desc{ color:#cbd6df; line-height:1.52; margin:6px 0 14px }
.modal-actions{ display:flex; gap:10px; flex-wrap:wrap }

.toast{
  position:fixed; left:50%; transform:translateX(-50%);
  top:74px; background:#14181d; color:#fff;
  border:1.5px solid #ff8f8f; border-radius:10px; padding:10px 14px;
  font-size:.95rem; z-index:1400; display:none;
  max-width:420px; text-align:center; /* slimmer */
}
.toast.show{ display:block; animation:fadeSlide .25s ease both }
@keyframes fadeSlide{
  from{ opacity:0; transform:translate(-50%, -6px) }
  to{ opacity:1; transform:translate(-50%, 0) }
}

/* =====================
   CONFETTI CANVAS
===================== */
#confetti-canvas{
  position:fixed; inset:60px 0 52px 0; z-index:1300;
  pointer-events:none; display:none;
}

/* =====================
   RESPONSIVE
===================== */
@media(min-width:700px){
  /* keep gear stacked (no side-by-side) */
}
@media(min-width:1024px){
  .h1{ font-size:2rem }
  .bar-rail{ height:220px }  /* a bit taller on large screens */
}

/* =====================
   UTILS
===================== */
.hidden{ display:none !important }
.center{ display:flex; align-items:center; justify-content:center }

@media (max-width: 700px){
  .view-arena{ height: calc(100vh - 60px - 52px); overflow: hidden; }
  .bars{ grid-template-columns: repeat(3, 1fr); } /* side-by-side traits */
  .bar-rail{ height: 120px; }                     /* shorter bars to fit */
}
.share-image{ width:100%; border:1.5px solid var(--border); border-radius:12px; margin-top:12px; }
